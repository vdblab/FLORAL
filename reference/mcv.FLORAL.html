<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summarizing selected compositional features over multiple cross validations — mcv.FLORAL • FLORAL</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarizing selected compositional features over multiple cross validations — mcv.FLORAL"><meta name="description" content="Summarizing FLORAL outputs from multiple random k-fold cross validations"><meta property="og:description" content="Summarizing FLORAL outputs from multiple random k-fold cross validations"><meta property="og:image" content="https://vdblab.github.io/FLORAL/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">FLORAL</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Using-FLORAL-for-Microbiome-Analysis.html">Using FLORAL for Microbiome Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/Using-FLORAL-for-survival-models-with-longitudinal-microbiome-data.html">Using FLORAL for survival models with longitudinal microbiome data</a></li>
    <li><a class="dropdown-item" href="../articles/Using-FLORAL-with-phyloseq.html">Using FLORAL with phyloseq data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/vdblab/FLORAL/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarizing selected compositional features over multiple cross validations</h1>
      <small class="dont-index">Source: <a href="https://github.com/vdblab/FLORAL/blob/master/R/FLORAL.R" class="external-link"><code>R/FLORAL.R</code></a></small>
      <div class="d-none name"><code>mcv.FLORAL.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Summarizing <code>FLORAL</code> outputs from multiple random k-fold cross validations</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mcv.FLORAL</span><span class="op">(</span></span>
<span>  mcv <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  ncore <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  ncov <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  family <span class="op">=</span> <span class="st">"gaussian"</span>,</span>
<span>  longitudinal <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  tobs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  failcode <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  corstr <span class="op">=</span> <span class="st">"exchangeable"</span>,</span>
<span>  scalefix <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  scalevalue <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  pseudo <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  length.lambda <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  lambda.min.ratio <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ncov.lambda.weight <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  a <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  mu <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  pfilter <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  maxiter <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  ncv <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  intercept <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  step2 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mcv">mcv<a class="anchor" aria-label="anchor" href="#arg-mcv"></a></dt>
<dd><p>Number of random `ncv`-fold cross-validation to be performed.</p></dd>


<dt id="arg-ncore">ncore<a class="anchor" aria-label="anchor" href="#arg-ncore"></a></dt>
<dd><p>Number of cores used for parallel computation. Default is to use only 1 core.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>A random seed for reproducibility of the results. By default the seed is the numeric form of <code><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date()</a></code>.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Feature matrix, where rows specify subjects and columns specify features. The first <code>ncov</code> columns should be patient characteristics and the rest columns are microbiome absolute counts corresponding to various taxa. If <code>x</code> contains longitudinal data, the rows must be sorted in the same order of the subject IDs used in <code>y</code>.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>Outcome. For a continuous or binary outcome, <code>y</code> is a vector. For survival outcome, <code>y</code> is a <code>Surv</code> object.</p></dd>


<dt id="arg-ncov">ncov<a class="anchor" aria-label="anchor" href="#arg-ncov"></a></dt>
<dd><p>An integer indicating the number of first <code>ncov</code> columns in <code>x</code> that will not be subject to the zero-sum constraint.</p></dd>


<dt id="arg-family">family<a class="anchor" aria-label="anchor" href="#arg-family"></a></dt>
<dd><p>Available options are <code>gaussian</code>, <code>binomial</code>, <code>cox</code>, <code>finegray</code>.</p></dd>


<dt id="arg-longitudinal">longitudinal<a class="anchor" aria-label="anchor" href="#arg-longitudinal"></a></dt>
<dd><p><code>TRUE</code> or <code>FALSE</code>, indicating whether longitudinal data matrix is specified for input <code>x</code>. (<code>Longitudinal=TRUE</code> and <code>family="cox"</code> or <code>"finegray"</code> will fit a time-dependent covariate model. <code>Longitudinal=TRUE</code> and <code>family="gaussian"</code> or <code>"binomial"</code> will fit a GEE model.)</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>If <code>longitudinal</code> is <code>TRUE</code>, <code>id</code> specifies subject IDs corresponding to the rows of input <code>x</code>.</p></dd>


<dt id="arg-tobs">tobs<a class="anchor" aria-label="anchor" href="#arg-tobs"></a></dt>
<dd><p>If <code>longitudinal</code> is <code>TRUE</code>, <code>tobs</code> specifies time points corresponding to the rows of input <code>x</code>.</p></dd>


<dt id="arg-failcode">failcode<a class="anchor" aria-label="anchor" href="#arg-failcode"></a></dt>
<dd><p>If <code>family = finegray</code>, <code>failcode</code> specifies the failure type of interest. This must be a positive integer.</p></dd>


<dt id="arg-corstr">corstr<a class="anchor" aria-label="anchor" href="#arg-corstr"></a></dt>
<dd><p>If a GEE model is specified, then <code>corstr</code> is the corresponding working correlation structure. Options are <code>independence</code>, <code>exchangeable</code>, <code>AR-1</code> and <code>unstructured</code>.</p></dd>


<dt id="arg-scalefix">scalefix<a class="anchor" aria-label="anchor" href="#arg-scalefix"></a></dt>
<dd><p><code>TRUE</code> or <code>FALSE</code>, indicating whether the scale parameter is estimated or fixed if a GEE model is specified.</p></dd>


<dt id="arg-scalevalue">scalevalue<a class="anchor" aria-label="anchor" href="#arg-scalevalue"></a></dt>
<dd><p>Specify the scale parameter if <code>scalefix=TRUE</code>.</p></dd>


<dt id="arg-pseudo">pseudo<a class="anchor" aria-label="anchor" href="#arg-pseudo"></a></dt>
<dd><p>Pseudo count to be added to <code>x</code> before taking log-transformation</p></dd>


<dt id="arg-length-lambda">length.lambda<a class="anchor" aria-label="anchor" href="#arg-length-lambda"></a></dt>
<dd><p>Number of penalty parameters used in the path</p></dd>


<dt id="arg-lambda-min-ratio">lambda.min.ratio<a class="anchor" aria-label="anchor" href="#arg-lambda-min-ratio"></a></dt>
<dd><p>Ratio between the minimum and maximum choice of lambda. Default is <code>NULL</code>, where the ratio is chosen as 1e-2.</p></dd>


<dt id="arg-ncov-lambda-weight">ncov.lambda.weight<a class="anchor" aria-label="anchor" href="#arg-ncov-lambda-weight"></a></dt>
<dd><p>Weight of the penalty lambda applied to the first <code>ncov</code> covariates. Default is 0 such that the first <code>ncov</code> covariates are not penalized.</p></dd>


<dt id="arg-a">a<a class="anchor" aria-label="anchor" href="#arg-a"></a></dt>
<dd><p>A scalar between 0 and 1: <code>a</code> is the weight for lasso penalty while <code>1-a</code> is the weight for ridge penalty.</p></dd>


<dt id="arg-mu">mu<a class="anchor" aria-label="anchor" href="#arg-mu"></a></dt>
<dd><p>Value of penalty for the augmented Lagrangian</p></dd>


<dt id="arg-pfilter">pfilter<a class="anchor" aria-label="anchor" href="#arg-pfilter"></a></dt>
<dd><p>A pre-specified threshold to force coefficients with absolute values less than pfilter times the maximum value of absolute coefficient as zeros in the GEE model. Default is zero, such that all coefficients will be reported.</p></dd>


<dt id="arg-maxiter">maxiter<a class="anchor" aria-label="anchor" href="#arg-maxiter"></a></dt>
<dd><p>Number of iterations needed for the outer loop of the augmented Lagrangian algorithm.</p></dd>


<dt id="arg-ncv">ncv<a class="anchor" aria-label="anchor" href="#arg-ncv"></a></dt>
<dd><p>Folds of cross-validation. Use <code>NULL</code> if cross-validation is not wanted.</p></dd>


<dt id="arg-intercept">intercept<a class="anchor" aria-label="anchor" href="#arg-intercept"></a></dt>
<dd><p><code>TRUE</code> or <code>FALSE</code>, indicating whether an intercept should be estimated.</p></dd>


<dt id="arg-step-">step2<a class="anchor" aria-label="anchor" href="#arg-step-"></a></dt>
<dd><p><code>TRUE</code> or <code>FALSE</code>, indicating whether a second-stage feature selection for specific ratios should be performed for the features selected by the main lasso algorithm. Will only be performed if cross validation is enabled.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p><code>TRUE</code> or <code>FALSE</code>, indicating whether printing progress bar as the algorithm runs.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p><code>TRUE</code> or <code>FALSE</code>, indicating whether returning summary plots of selection probability for taxa features.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with relative frequencies of a certain feature being selected over <code>mcv</code> <code>ncv</code>-fold cross-validations.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Fei T, Funnell T, Waters N, Raj SS et al. Scalable Log-ratio Lasso Regression Enhances Microbiome Feature Selection for Predictive Models. bioRxiv 2023.05.02.538599.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Teng Fei. Email: feit1@mskcc.org</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">23420</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="simu.html">simu</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">50</span>,p<span class="op">=</span><span class="fl">30</span>,model<span class="op">=</span><span class="st">"linear"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">mcv.FLORAL</span><span class="op">(</span>mcv<span class="op">=</span><span class="fl">2</span>,ncore<span class="op">=</span><span class="fl">1</span>,x<span class="op">=</span><span class="va">dat</span><span class="op">$</span><span class="va">xcount</span>,y<span class="op">=</span><span class="va">dat</span><span class="op">$</span><span class="va">y</span>,ncv<span class="op">=</span><span class="fl">2</span>,progress<span class="op">=</span><span class="cn">FALSE</span>,step2<span class="op">=</span><span class="cn">TRUE</span>,plot<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Teng Fei, Tyler Funnell, Nicholas Waters, Sandeep Raj.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

